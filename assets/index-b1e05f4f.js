import{$ as I,m as z,c as M,i as D,q as O,l as $,H as j,a as X}from"./use-translate-0400f29b.js";import{u as G}from"./use-touch-8cd17a21.js";import{u as J}from"./use-expose-efcfdee3.js";import{A as N,y as b,H as K,D as E,e as l,r as Q,o as Y,a as Z,w as r,C as t,F as ee}from"./vue-libs-83dbabed.js";import{c as te,n as R,w as oe}from"./with-install-a78877b5.js";import{c as le}from"./interceptor-3c3c2616.js";import{V as p}from"./index-33a62985.js";import{V as H}from"./index-3124e750.js";import{V as ae}from"./index-defa0369.js";import{c as ne}from"./index-2630be1a.js";import{a as se}from"./function-call-7fdd873d.js";import"./constant-ee6e27d7.js";import"./use-route-b1061918.js";import"./index-5a7b6df9.js";import"./index-c916422a.js";import"./index-e6476cbd.js";import"./index-5b4098db.js";import"./index-74bb5fae.js";import"./mount-component-94eea14a.js";import"./index-4c6d2d8c.js";import"./use-lock-scroll-1eff2e8c.js";import"./use-lazy-render-2383afef.js";import"./on-popup-reopen-bcf43cef.js";import"./use-scope-id-e548748d.js";import"./index-b7134fb7.js";import"./index-d2a53263.js";import"./use-placeholder-7d274f32.js";import"./use-height-84370a97.js";const[re,x]=M("swipe-cell"),ie={name:te(""),disabled:Boolean,leftWidth:R,rightWidth:R,beforeClose:Function,stopPropagation:Boolean},ce=N({name:re,props:ie,emits:["open","close","click"],setup(a,{emit:o,slots:d}){let i,f,m,c;const h=b(),y=b(),k=b(),n=K({offset:0,dragging:!1}),g=G(),T=e=>e.value?O(e).width:0,C=E(()=>D(a.leftWidth)?+a.leftWidth:T(y)),v=E(()=>D(a.rightWidth)?+a.rightWidth:T(k)),S=e=>{n.offset=e==="left"?C.value:-v.value,i||(i=!0,o("open",{name:a.name,position:e}))},_=e=>{n.offset=0,i&&(i=!1,o("close",{name:a.name,position:e}))},L=e=>{const s=Math.abs(n.offset),u=.15,F=i?1-u:u,q=e==="left"?C.value:v.value;q&&s>q*F?S(e):_(e)},U=e=>{a.disabled||(m=n.offset,g.start(e))},A=e=>{if(a.disabled)return;const{deltaX:s}=g;g.move(e),g.isHorizontal()&&(f=!0,n.dragging=!0,(!i||s.value*m<0)&&$(e,a.stopPropagation),n.offset=j(s.value+m,-v.value,C.value))},W=()=>{n.dragging&&(n.dragging=!1,L(n.offset>0?"left":"right"),setTimeout(()=>{f=!1},0))},B=(e="outside")=>{c||(o("click",e),i&&!f&&(c=!0,le(a.beforeClose,{args:[{name:a.name,position:e}],done:()=>{c=!1,_(e)},canceled:()=>c=!1,error:()=>c=!1})))},P=(e,s)=>u=>{s&&u.stopPropagation(),B(e)},V=(e,s)=>{const u=d[e];if(u)return l("div",{ref:s,class:x(e),onClick:P(e,!0)},[u()])};return J({open:S,close:_}),I(h,()=>B("outside"),{eventName:"touchstart"}),z("touchmove",A,{target:h}),()=>{var s;const e={transform:`translate3d(${n.offset}px, 0, 0)`,transitionDuration:n.dragging?"0s":".6s"};return l("div",{ref:h,class:x(),onClick:P("cell",f),onTouchstartPassive:U,onTouchend:W,onTouchcancel:W},[l("div",{class:x("wrapper"),style:e},[V("left",y),(s=d.default)==null?void 0:s.call(d),V("right",k)])])}}}),ue=oe(ce),w=ue,Ae=N({__name:"index",setup(a){const o=X({"zh-CN":{select:"选择",delete:"删除",collect:"收藏",title:"单元格",confirm:"确定删除吗？",cardTitle:"商品标题",beforeClose:"异步关闭",customContent:"自定义内容"},"en-US":{select:"Select",delete:"Delete",collect:"Collect",title:"Cell",confirm:"Are you sure to delete?",cardTitle:"Title",beforeClose:"Before Close",customContent:"Custom Content"}}),d=ne("ipad.jpeg"),i=({position:f})=>{switch(f){case"left":case"cell":case"outside":return!0;case"right":return new Promise(m=>{se({title:o("confirm")}).then(()=>m(!0)).catch(()=>m(!1))})}};return(f,m)=>{const c=Q("demo-block");return Y(),Z(ee,null,[l(c,{title:t(o)("basicUsage")},{default:r(()=>[l(t(w),null,{left:r(()=>[l(t(p),{square:"",type:"primary",text:t(o)("select")},null,8,["text"])]),right:r(()=>[l(t(p),{square:"",type:"danger",text:t(o)("delete")},null,8,["text"]),l(t(p),{square:"",type:"primary",text:t(o)("collect")},null,8,["text"])]),default:r(()=>[l(t(H),{border:!1,title:t(o)("title"),value:t(o)("content")},null,8,["title","value"])]),_:1})]),_:1},8,["title"]),l(c,{title:t(o)("customContent")},{default:r(()=>[l(t(w),null,{right:r(()=>[l(t(p),{square:"",type:"danger",class:"delete-button",text:t(o)("delete")},null,8,["text"])]),default:r(()=>[l(t(ae),{num:"2",price:"2.00",desc:t(o)("desc"),title:t(o)("cardTitle"),thumb:t(d)},null,8,["desc","title","thumb"])]),_:1})]),_:1},8,["title"]),l(c,{title:t(o)("beforeClose")},{default:r(()=>[l(t(w),{"before-close":i},{left:r(()=>[l(t(p),{square:"",type:"primary",text:t(o)("select")},null,8,["text"])]),right:r(()=>[l(t(p),{square:"",type:"danger",text:t(o)("delete")},null,8,["text"])]),default:r(()=>[l(t(H),{border:!1,title:t(o)("title"),value:t(o)("content")},null,8,["title","value"])]),_:1})]),_:1},8,["title"])],64)}}});export{Ae as default};
