import{L as F,M as Se,J as Te,c as D,i as q,O as we,b as Ce,G as ke,P as Ie,o as xe,n as Be,p as Re,Q as $e,h as G,z as Ae,R as J,r as p,e as Pe,u as Ne}from"./use-translate.22943ac9.js";import{n as I,t as M,d as Z,m as Oe,c as _,u as ze,w as ne}from"./with-install.c6b01ca2.js";import{A as H,D as C,e as h,Q as ae,x as $,y as k,N as Le,H as je,q as R,L as _e,B as Ee,E as Me,I as De,j as He,v as We}from"./vue-libs.df86f395.js";import{u as ie}from"./use-id.2eb6d212.js";import{u as oe}from"./use-expose.e6b8a577.js";import{a as Ze,r as Ve}from"./use-route.f401cb95.js";import{S as Fe,a as qe}from"./index.b56dbfad.js";import{b as Ke}from"./constant.80c6de18.js";import{c as Qe}from"./interceptor.0a931a5c.js";import{u as Ue}from"./use-refs.c03004fa.js";import{o as Xe}from"./on-popup-reopen.e1d5c0c5.js";import{S as Ye}from"./index.432c4e67.js";import{B as Ge}from"./index.7f987ed8.js";function Je(e,o,i){let b=0;const a=e.scrollLeft,f=i===0?1:Math.round(i*1e3/16);function c(){e.scrollLeft+=(o-a)/f,++b<f&&F(c)}c()}function pe(e,o,i,b){let a=Se(e);const f=a<o,c=i===0?1:Math.round(i*1e3/16),u=(o-a)/c;function l(){a+=u,(f&&a>o||!f&&a<o)&&(a=o),Te(e,a),f&&a<o||!f&&a>o?F(l):b&&F(b)}l()}function et(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ae(e)}const[tt,ee]=D("tab");var nt=H({name:tt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:I,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:M},setup(e,{slots:o}){const i=C(()=>{const a={},{type:f,color:c,disabled:u,isActive:l,activeColor:m,inactiveColor:y}=e;c&&f==="card"&&(a.borderColor=c,u||(l?a.backgroundColor=c:a.color=c));const S=l?m:y;return S&&(a.color=S),a}),b=()=>{const a=h("span",{class:ee("text",{ellipsis:!e.scrollable})},[o.title?o.title():e.title]);return e.dot||q(e.badge)&&e.badge!==""?h(Ge,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},et(a)?a:{default:()=>[a]}):a};return()=>h("div",{id:e.id,role:"tab",class:[ee([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:i.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[b()])}});function at(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ae(e)}const[it,te]=D("tabs");var ot=H({name:it,props:{count:Z(Number),inited:Boolean,animated:Boolean,duration:Z(I),swipeable:Boolean,lazyRender:Boolean,currentIndex:Z(Number)},emits:["change"],setup(e,{emit:o,slots:i}){const b=$(),a=u=>o("change",u),f=()=>{var l;const u=(l=i.default)==null?void 0:l.call(i);return e.animated||e.swipeable?h(Fe,{ref:b,loop:!1,class:te("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:a},at(u)?u:{default:()=>[u]}):u},c=u=>{const l=b.value;l&&l.state.active!==u&&l.swipeTo(u,{immediate:!e.inited})};return k(()=>e.currentIndex,c),Le(()=>{c(e.currentIndex)}),()=>h("div",{class:te("content",{animated:e.animated||e.swipeable})},[f()])}});const[re,E]=D("tabs"),rt={type:Oe("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:_(0),duration:_(.3),animated:Boolean,ellipsis:M,swipeable:Boolean,scrollspy:Boolean,offsetTop:_(0),background:String,lazyRender:M,lineWidth:I,lineHeight:I,beforeChange:Function,swipeThreshold:_(5),titleActiveColor:String,titleInactiveColor:String},le=Symbol(re);var lt=H({name:re,props:rt,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:o,slots:i}){let b,a,f;const c=$(),u=$(),l=$(),m=ie(),y=we(c),[x,S]=Ue(),{children:d,linkChildren:A}=Ce(le),s=je({inited:!1,position:"",lineStyle:{},currentIndex:-1}),B=C(()=>d.length>e.swipeThreshold||!e.ellipsis||e.shrink),P=C(()=>({borderColor:e.color,background:e.background})),T=(t,n)=>{var r;return(r=t.name)!=null?r:n},K=C(()=>{const t=d[s.currentIndex];if(t)return T(t,s.currentIndex)}),W=C(()=>ke(e.offsetTop)),Q=C(()=>e.sticky?W.value+b:0),N=t=>{const n=u.value,r=x.value;if(!B.value||!n||!r||!r[s.currentIndex])return;const v=r[s.currentIndex].$el,g=v.offsetLeft-(n.offsetWidth-v.offsetWidth)/2;Je(n,g,t?0:+e.duration)},w=()=>{const t=s.inited;R(()=>{const n=x.value;if(!n||!n[s.currentIndex]||e.type!=="line"||$e(c.value))return;const r=n[s.currentIndex].$el,{lineWidth:v,lineHeight:g}=e,L=r.offsetLeft+r.offsetWidth/2,j={width:G(v),backgroundColor:e.color,transform:`translateX(${L}px) translateX(-50%)`};if(t&&(j.transitionDuration=`${e.duration}s`),q(g)){const Y=G(g);j.height=Y,j.borderRadius=Y}s.lineStyle=j})},se=t=>{const n=t<s.currentIndex?-1:1;for(;t>=0&&t<d.length;){if(!d[t].disabled)return t;t+=n}},O=t=>{const n=se(t);if(!q(n))return;const r=d[n],v=T(r,n),g=s.currentIndex!==null;s.currentIndex=n,v!==e.active&&(o("update:active",v),g&&o("change",v,r.title))},z=t=>{const n=d.find((v,g)=>T(v,g)===t),r=n?d.indexOf(n):0;O(r)},U=(t=!1)=>{if(e.scrollspy){const n=d[s.currentIndex].$el;if(n&&y.value){const r=J(n,y.value)-Q.value;a=!0,pe(y.value,r,t?0:+e.duration,()=>{a=!1})}}},de=(t,n,r)=>{const{title:v,disabled:g}=d[n],L=T(d[n],n);g||(Qe(e.beforeChange,{args:[L],done:()=>{O(n),U()}}),Ze(t)),o("clickTab",{name:L,title:v,event:r,disabled:g})},ue=t=>{f=t.isFixed,o("scroll",t)},fe=t=>{R(()=>{z(t),U(!0)})},be=()=>{for(let t=0;t<d.length;t++){const{top:n}=p(d[t].$el);if(n>Q.value)return t===0?0:t-1}return d.length-1},ve=()=>{if(e.scrollspy&&!a){const t=be();O(t)}},he=()=>d.map((t,n)=>h(nt,Ee({key:t.id,id:`${m}-${n}`,ref:S(n),type:e.type,color:e.color,style:t.titleStyle,class:t.titleClass,shrink:e.shrink,isActive:n===s.currentIndex,controls:t.id,scrollable:B.value,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:r=>de(t,n,r)},Re(t,["dot","badge","title","disabled","showZeroBadge"])),{title:t.$slots.title})),me=()=>{if(e.type==="line"&&d.length)return h("div",{class:E("line"),style:s.lineStyle},null)},X=()=>{var r,v;const{type:t,border:n}=e;return h("div",{ref:l,class:[E("wrap"),{[Ke]:t==="line"&&n}]},[h("div",{ref:u,role:"tablist",class:E("nav",[t,{shrink:e.shrink,complete:B.value}]),style:P.value,"aria-orientation":"horizontal"},[(r=i["nav-left"])==null?void 0:r.call(i),he(),me(),(v=i["nav-right"])==null?void 0:v.call(i)])])};k([()=>e.color,Ie],w),k(()=>e.active,t=>{t!==K.value&&z(t)}),k(()=>d.length,()=>{s.inited&&(z(e.active),w(),R(()=>{N(!0)}))}),k(()=>s.currentIndex,()=>{N(),w(),f&&!e.scrollspy&&Ae(Math.ceil(J(c.value)-W.value))});const ge=()=>{z(e.active),R(()=>{s.inited=!0,l.value&&(b=p(l.value).height),N(!0)})},ye=(t,n)=>o("rendered",t,n);return oe({resize:w,scrollTo:fe}),_e(w),Xe(w),xe(ge),Be("scroll",ve,{target:y}),A({id:m,props:e,setLine:w,onRendered:ye,currentName:K,scrollIntoView:N}),()=>{var t;return h("div",{ref:c,class:E([e.type])},[e.sticky?h(Ye,{container:c.value,offsetTop:W.value,onScroll:ue},{default:()=>{var n;return[X(),(n=i["nav-bottom"])==null?void 0:n.call(i)]}}):[X(),(t=i["nav-bottom"])==null?void 0:t.call(i)],h(ot,{count:d.length,inited:s.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:s.currentIndex,onChange:O},{default:()=>{var n;return[(n=i.default)==null?void 0:n.call(i)]}})])}}});const ce=Symbol(),It=()=>Me(ce,null),[ct,V]=D("tab"),st=Pe({},Ve,{dot:Boolean,name:I,badge:I,title:String,disabled:Boolean,titleClass:ze,titleStyle:[String,Object],showZeroBadge:M});var dt=H({name:ct,props:st,setup(e,{slots:o}){const i=ie(),b=$(!1),{parent:a,index:f}=Ne(le);if(!a)return;const c=()=>{var m;return(m=e.name)!=null?m:f.value},u=()=>{b.value=!0,a.props.lazyRender&&R(()=>{a.onRendered(c(),e.title)})},l=C(()=>{const m=c()===a.currentName.value;return m&&!b.value&&u(),m});return k(()=>e.title,()=>{a.setLine(),a.scrollIntoView()}),De(ce,l),()=>{var P;const m=`${a.id}-${f.value}`,{animated:y,swipeable:x,scrollspy:S,lazyRender:d}=a.props;if(!o.default&&!y)return;const A=S||l.value;if(y||x)return h(qe,{id:i,role:"tabpanel",class:V("panel-wrapper",{inactive:!l.value}),tabindex:l.value?0:-1,"aria-hidden":!l.value,"aria-labelledby":m},{default:()=>{var T;return[h("div",{class:V("panel")},[(T=o.default)==null?void 0:T.call(o)])]}});const B=b.value||S||!d?(P=o.default)==null?void 0:P.call(o):null;return oe({id:i}),He(h("div",{id:i,role:"tabpanel",class:V("panel"),tabindex:A?0:-1,"aria-labelledby":m},[B]),[[We,A]])}}});const xt=ne(dt),Bt=ne(lt);export{Bt as T,xt as a,It as u};
