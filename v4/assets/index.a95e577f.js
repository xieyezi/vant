import{c as M,p as N,i as L,e as k,d as z,f as V}from"./use-translate.4bd55976.js";import{m as y,n as v,a as j,u as O,w as U}from"./with-install.4d0ca77e.js";import{I as q}from"./index.43c21584.js";import{P as A}from"./index.df58843c.js";import{L as D}from"./index.cef67cd8.js";import{A as E,y as h,N as F,G,e as i,B as S,x as H,P as _}from"./vue-libs.34a885a4.js";import{m as J,u as K}from"./mount-component.60637ff5.js";let d=0;function Q(e){e?(d||document.body.classList.add("van-toast--unclickable"),d++):d&&(d--,d||document.body.classList.remove("van-toast--unclickable"))}const[R,c]=M("toast"),W=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],X={icon:String,show:Boolean,type:y("text"),overlay:Boolean,message:v,iconSize:v,duration:j(2e3),position:y("middle"),teleport:[String,Object],className:O,iconPrefix:String,transition:y("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:O,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean},P=E({name:R,props:X,emits:["update:show"],setup(e,{emit:n,slots:s}){let f,l=!1;const r=()=>{const t=e.show&&e.forbidClick;l!==t&&(l=t,Q(l))},u=t=>n("update:show",t),p=()=>{e.closeOnClick&&u(!1)},m=()=>clearTimeout(f),g=()=>{const{icon:t,type:o,iconSize:w,iconPrefix:I,loadingType:B}=e;if(t||o==="success"||o==="fail")return i(q,{name:t||o,size:w,class:c("icon"),classPrefix:I},null);if(o==="loading")return i(D,{class:c("loading"),size:w,type:B},null)},x=()=>{const{type:t,message:o}=e;if(s.message)return i("div",{class:c("text")},[s.message()]);if(L(o)&&o!=="")return t==="html"?i("div",{key:0,class:c("text"),innerHTML:String(o)},null):i("div",{class:c("text")},[o])};return h(()=>[e.show,e.forbidClick],r),h(()=>[e.show,e.type,e.message,e.duration],()=>{m(),e.show&&e.duration>0&&(f=setTimeout(()=>{u(!1)},e.duration))}),F(r),G(r),()=>i(A,S({class:[c([e.position,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:p,onClosed:m,"onUpdate:show":u},N(e,W)),{default:()=>[g(),x()]})}}),Y={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let a=[],Z=!1,b=k({},Y);const $=new Map;function T(e){return V(e)?e:{message:e}}function ee(){const{instance:e,unmount:n}=J({setup(){const s=H(""),{open:f,state:l,close:r,toggle:u}=K(),p=()=>{},m=()=>i(P,S(l,{onClosed:p,"onUpdate:show":u}),null);return h(s,g=>{l.message=g}),_().render=m,{open:f,close:r,message:s}}});return e}function ne(){if(!a.length||Z){const e=ee();a.push(e)}return a[a.length-1]}function te(e={}){if(!z)return{};const n=ne(),s=T(e);return n.open(k({},b,$.get(s.type||b.type),s)),n}const C=e=>n=>te(k({type:e},T(n))),fe=C("loading"),me=C("success"),ge=C("fail"),pe=e=>{a.length&&(e?(a.forEach(n=>{n.close()}),a=[]):a[0].close())},oe=U(P),ye=oe;export{ye as V,fe as a,me as b,pe as c,ge as d,te as s};
