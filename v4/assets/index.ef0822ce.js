import{b as M,V as ct}from"./index.f299ce25.js";import{c as q,O as rt,b as at,i as lt,n as ut,l as dt,Q as ft,M as L,r as O,z as ht,y as K,u as mt,e as pt,v as xt,a as gt}from"./use-translate.8036e41d.js";import{t as vt,n as Z,a as yt,w as G}from"./with-install.6887218d.js";import{u as Tt}from"./use-touch.ee9512d6.js";import{u as J}from"./use-expose.1f17c8d6.js";import{A as B,x as b,D as R,N as Ct,y as j,e as c,S as It,Q as St,q as At,H as bt,o as _,c as kt,w as C,C as n,a as F,b as H,d as U,F as Q,h as _t,t as wt}from"./vue-libs.a040eeb8.js";import{f as Lt}from"./constant.80c6de18.js";import{V as I}from"./index.e17d8230.js";import"./use-id.3079e917.js";import"./use-route.f2a7e4c6.js";import"./index.867f8025.js";import"./on-popup-reopen.2164636b.js";import"./interceptor.66b82326.js";import"./use-refs.91bd8378.js";import"./index.6ff4f0d9.js";import"./index.bbaa83e9.js";function Ot(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!St(e)}function Rt(){const e="A".charCodeAt(0);return Array(26).fill("").map((o,f)=>String.fromCharCode(e+f))}const[W,w]=q("index-bar"),Bt={sticky:vt,zIndex:Z,teleport:[String,Object],highlightColor:String,stickyOffsetTop:yt(0),indexList:{type:Array,default:Rt}},tt=Symbol(W),Vt=B({name:W,props:Bt,emits:["select","change"],setup(e,{emit:r,slots:o}){const f=b(),h=b(""),x=Tt(),a=rt(f),{children:g,linkChildren:i}=at(tt);let m;i({props:e});const S=R(()=>{if(lt(e.zIndex))return{zIndex:+e.zIndex+1}}),et=R(()=>{if(e.highlightColor)return{color:e.highlightColor}}),V=(t,s)=>{for(let l=g.length-1;l>=0;l--){const d=l>0?s[l-1].height:0,u=e.sticky?d+e.stickyOffsetTop:0;if(t+u>=s[l].top)return l}return-1},E=t=>g.find(s=>String(s.index)===t),k=()=>{if(ft(f))return;const{sticky:t,indexList:s}=e,l=L(a.value),d=O(a),u=g.map(T=>T.getRect(a.value,d));let v=-1;if(m){const T=E(m);if(T){const y=T.getRect(a.value,d);v=V(y.top,u)}}else v=V(l,u);h.value=s[v],t&&g.forEach((T,y)=>{const{state:p,$el:it}=T;if(y===v||y===v-1){const A=it.getBoundingClientRect();p.left=A.left,p.width=A.width}else p.left=null,p.width=null;if(y===v)p.active=!0,p.top=Math.max(e.stickyOffsetTop,u[y].top-l)+d.top;else if(y===v-1&&m===""){const A=u[v].top-l;p.active=A>0,p.top=A+d.top-u[y].height}else p.active=!1}),m=""},P=()=>{At(k)};ut("scroll",k,{target:a,passive:!0}),Ct(P),j(()=>e.indexList,P),j(h,t=>{t&&r("change",t)});const nt=()=>e.indexList.map(t=>{const s=t===h.value;return c("span",{class:w("index",{active:s}),style:s?et.value:void 0,"data-index":t},[t])}),N=t=>{m=String(t);const s=E(m);if(s){const l=L(a.value),d=O(a),{offsetHeight:u}=document.documentElement;if(l===u-d.height){k();return}s.$el.scrollIntoView(),e.sticky&&e.stickyOffsetTop&&ht(K()-e.stickyOffsetTop),r("select",s.index)}},$=t=>{const{index:s}=t.dataset;s&&N(s)},ot=t=>{$(t.target)};let z;const st=t=>{if(x.move(t),x.isVertical()){dt(t);const{clientX:s,clientY:l}=t.touches[0],d=document.elementFromPoint(s,l);if(d){const{index:u}=d.dataset;u&&z!==u&&(z=u,$(d))}}},D=()=>c("div",{class:w("sidebar"),style:S.value,onClick:ot,onTouchstartPassive:x.start,onTouchmove:st},[nt()]);return J({scrollTo:N}),()=>{var s;let t;return c("div",{ref:f,class:w()},[e.teleport?c(It,{to:e.teleport},Ot(t=D())?t:{default:()=>[t]}):D(),(s=o.default)==null?void 0:s.call(o)])}}}),Et=G(Vt),X=Et,[Pt,Nt]=q("index-anchor"),$t={index:Z},zt=B({name:Pt,props:$t,setup(e,{slots:r}){const o=bt({top:0,left:null,rect:{top:0,height:0},width:null,active:!1}),f=b(),{parent:h}=mt(tt);if(!h)return;const x=()=>o.active&&h.props.sticky,a=R(()=>{const{zIndex:i,highlightColor:m}=h.props;if(x())return pt(xt(i),{left:o.left?`${o.left}px`:void 0,width:o.width?`${o.width}px`:void 0,transform:o.top?`translate3d(0, ${o.top}px, 0)`:void 0,color:m})});return J({state:o,getRect:(i,m)=>{const S=O(f);return o.rect.height=S.height,i===window||i===document.body?o.rect.top=S.top+K():o.rect.top=S.top+L(i)-m.top,o.rect}}),()=>{const i=x();return c("div",{ref:f,style:{height:i?`${o.rect.height}px`:void 0}},[c("div",{style:a.value,class:[Nt({sticky:i}),{[Lt]:i}]},[r.default?r.default():e.index])])}}}),Dt=G(zt),Y=Dt,ne=B({__name:"index",setup(e){const r=gt({"zh-CN":{text:"\u6587\u672C",customIndexList:"\u81EA\u5B9A\u4E49\u7D22\u5F15\u5217\u8868"},"en-US":{text:"Text",customIndexList:"Custom Index List"}}),o=b(0),f=[],h=[1,2,3,4,5,6,8,9,10],x="A".charCodeAt(0);for(let a=0;a<26;a++)f.push(String.fromCharCode(x+a));return(a,g)=>(_(),kt(n(ct),{active:o.value,"onUpdate:active":g[0]||(g[0]=i=>o.value=i)},{default:C(()=>[c(n(M),{title:n(r)("basicUsage")},{default:C(()=>[c(n(X),null,{default:C(()=>[(_(),F(Q,null,H(f,i=>U("div",{key:i},[c(n(Y),{index:i},null,8,["index"]),c(n(I),{title:n(r)("text")},null,8,["title"]),c(n(I),{title:n(r)("text")},null,8,["title"]),c(n(I),{title:n(r)("text")},null,8,["title"])])),64))]),_:1})]),_:1},8,["title"]),c(n(M),{title:n(r)("customIndexList")},{default:C(()=>[c(n(X),{"index-list":h},{default:C(()=>[(_(),F(Q,null,H(h,i=>U("div",{key:i},[c(n(Y),{index:i},{default:C(()=>[_t(wt(n(r)("title")+i),1)]),_:2},1032,["index"]),c(n(I),{title:n(r)("text")},null,8,["title"]),c(n(I),{title:n(r)("text")},null,8,["title"]),c(n(I),{title:n(r)("text")},null,8,["title"])])),64))]),_:1})]),_:1},8,["title"])]),_:1},8,["active"]))}});export{ne as default};
